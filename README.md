Tom's Web Consulting Squarespace Library

This is a
[monorepo](https://en.wikipedia.org/wiki/Monorepo)
of code for adding various effects to Squarespace v7.1 and v7.0 sites.

## Make a Donation

Please consider making a donation.

[![](https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif)](https://www.paypal.com/donate?hosted_button_id=FSPYTKHXHRU5U)

Your donations help me to continue to help you realize your website goals! The
donation amounts are suggested amounts. Any donation amount is greatly
appreciated!

Did my code help you build a site for your client and make you some dough? How
about a slice of the bread for Tom?

## Need Help Installing or Customizing the Code?

I'm [available for consulting](http://www.tomsWeb.consulting/).

## Layout Overview

twcsl contains over 85 effects. Each effect has it's own version number, code,
read me, and etc. Each effect is independant. In other words all the effects are
not necessarily designed to all work together.

* v7.0 and v7.1 effects

* v7.0 only effects

  * effects for all v7.0 templates
  
  * template specific effects
  
* v7.1 only effects

* twcsl

## Effects

* [Add Button After Add to Cart Button of Product Detail Page](Add%20Button%20After%20Add%20to%20Cart%20Button%20of%20Product%20Detail%20Page)
  
* [Add Category Attribute to a Store Category Page](Add%20Category%20Attribute%20to%20a%20Store%20Category%20Page)
  
* [Add Continue Shopping Message When Cart Has Items](Add%20Continue%20Shopping%20Message%20When%20Cart%20Has%20Items)
  
* [Add Form Block Section Labels](Add%20Form%20Block%20Section%20Labels)
  
* [Add Images to Product Detail Page Based on Tags Above Additional Info](Add%20Images%20to%20Product%20Detail%20Page%20Based%20on%20Tags%20Above%20Additional%20Info)
  
* [Add One Left Class to Product Detail Page](Add%20One%20Left%20Class%20to%20Product%20Detail%20Page)
  
* [Add Store Category Accordion](Add%20Store%20Category%20Accordion)
  
* [Add Text Based on Tags After Matched Text to Product Description](Add%20Text%20Based%20on%20Tags%20After%20Matched%20Text%20to%20Product%20Description)
  
* [Cart Prices Change](Cart%20Prices%20Change)
  
* [Cart Prices Sqs-Money-Native Add](Cart%20Prices%20Sqs-Money-Native%20Add)
  
* [Change Add to Cart Adding Added Button Text](Change%20Add%20to%20Cart%20Adding%20Added%20Button%20Text)
  
* [Change Cart Continue Shopping Text](Change%20Cart%20Continue%20Shopping%20Text)
  
* [Change Cart Empty Message](Change%20Cart%20Empty%20Message)
  
* [Change Cart Title](Change%20Cart%20Title)
  
* [Change Form Block Post-Submit Redirect Based on a Radio Form Field Selected Option](Change%20Form%20Block%20Post-Submit%20Redirect%20Based%20on%20a%20Radio%20Form%20Field%20Selected%20Option)
  
* [Change Form Block Post-Submit Redirect Based on a Select Form Field Selected Option](Change%20Form%20Block%20Post-Submit%20Redirect%20Based%20on%20a%20Select%20Form%20Field%20Selected%20Option)
  
* [Change Search Page Input Placeholder Text](Change%20Search%20Page%20Input%20Placeholder%20Text)
  
* [Change Unable to Add Item to Cart Alert for Only N Available](Change%20Unable%20to%20Add%20Item%20to%20Cart%20Alert%20for%20Only%20N%20Available)
  
* [Change Unable to Add Item to Cart Alert for Out of Stock Variants](Change%20Unable%20to%20Add%20Item%20to%20Cart%20Alert%20for%20Out%20of%20Stock%20Variants)
  
* [Change Unable to Add Item to Cart Alert for Unselected Variants](Change%20Unable%20to%20Add%20Item%20to%20Cart%20Alert%20for%20Unselected%20Variants)
  
* [Fix Image Block SS Encoded Query Component Links](Fix%20Image%20Block%20SS%20Encoded%20Query%20Component%20Links)
  
* [Hide Product Detail Add to Cart Tagged "hide atc"](Hide%20Product%20Detail%20Add%20to%20Cart%20Tagged%20"hide%20atc")
  
* [Move Product Detail Additional Info First N Blocks to End of Product Details](Move%20Product%20Detail%20Additional%20Info%20First%20N%20Blocks%20to%20End%20of%20Product%20Details)
  
* [Redirect to Url After Add to Cart Button Has Been Clicked and SS Indicates Item Has Been Added to Cart](Redirect%20to%20Url%20After%20Add%20to%20Cart%20Button%20Has%20Been%20Clicked%20and%20SS%20Indicates%20Item%20Has%20Been%20Added%20to%20Cart)
  
* [Replace Form Submit Button Submitting Text](Replace%20Form%20Submit%20Button%20Submitting%20Text)
  
* [Responsive Image Map Template](Responsive%20Image%20Map%20Template)
  
* [Set Store Product Detail Named Form Labeled Text Field Character Max Length](Set%20Store%20Product%20Detail%20Named%20Form%20Labeled%20Text%20Field%20Character%20Max%20Length)
  
* [Store Price Change](Store%20Price%20Change)
  
* [Store Product Detail Variant Order Reverse](Store%20Product%20Detail%20Variant%20Order%20Reverse)
  
* [v7.0](v7.0)
  
  * [Add Content of a Page to Products Page](v7.0/Add%20Content%20of%20a%20Page%20to%20Products%20Page)
    
  * [Add Store Category Page Description](v7.0/Add%20Store%20Category%20Page%20Description)
    
  * [Bedford Template Family](v7.0/Bedford%20Template%20Family)
    
    * [Blog Post Tag Url Change](v7.0/Bedford%20Template%20Family/Blog%20Post%20Tag%20Url%20Change)
      
  * [Brine Template Family](v7.0/Brine%20Template%20Family)
    
    * [Change Blog Listing Item Links to Source URL](v7.0/Brine%20Template%20Family/Change%20Blog%20Listing%20Item%20Links%20to%20Source%20URL)
      
    * [Hide Product Detail Add to Cart, Price, and Quantity](v7.0/Brine%20Template%20Family/Hide%20Product%20Detail%20Add%20to%20Cart,%20Price,%20and%20Quantity)
      
    * [Move or Copy Store Intro After Products List](v7.0/Brine%20Template%20Family/Move%20or%20Copy%20Store%20Intro%20After%20Products%20List)
      
  * [Montauk Template Family](v7.0/Montauk%20Template%20Family)
    
    * [Change Unable to Add Item to Cart Alert](v7.0/Montauk%20Template%20Family/Change%20Unable%20to%20Add%20Item%20to%20Cart%20Alert)
      
* [v7.1](v7.1)
  
  * [Add Buttons to Header](v7.1/Add%20Buttons%20to%20Header)
    
  * [Add Categories Attribute to Event Detail Page](v7.1/Add%20Categories%20Attribute%20to%20Event%20Detail%20Page)
    
  * [Add Image Tags Between Event List Items](v7.1/Add%20Image%20Tags%20Between%20Event%20List%20Items)
    
  * [Add Mindbody Login Register Link to Navigation](v7.1/Add%20Mindbody%20Login%20Register%20Link%20to%20Navigation)
    
  * [Add Store Category Page Description](v7.1/Add%20Store%20Category%20Page%20Description)
    
  * [Add Store Description](v7.1/Add%20Store%20Description)
    
  * [Auto Change Product Grid Image Opacity on Touch Screen Device](v7.1/Auto%20Change%20Product%20Grid%20Image%20Opacity%20on%20Touch%20Screen%20Device)
    
  * [Auto Click User Items List Arrow Right](v7.1/Auto%20Click%20User%20Items%20List%20Arrow%20Right)
    
  * [Change Blog Listing Item Image URL to Source URL](v7.1/Change%20Blog%20Listing%20Item%20Image%20URL%20to%20Source%20URL)
    
  * [Change CTA Button Text and Url Based on Language](v7.1/Change%20CTA%20Button%20Text%20and%20Url%20Based%20on%20Language)
    
  * [Change Default Image Aspect Ratios for Store Page](v7.1/Change%20Default%20Image%20Aspect%20Ratios%20for%20Store%20Page)
    
  * [Change Image Card, Image to Text Width Ratios](v7.1/Change%20Image%20Card,%20Image%20to%20Text%20Width%20Ratios)
    
  * [Change Site Title Space Runs to Break Element](v7.1/Change%20Site%20Title%20Space%20Runs%20to%20Break%20Element)
    
  * [Change Store Product Detail Related Products Grid Column Number for Desktop](v7.1/Change%20Store%20Product%20Detail%20Related%20Products%20Grid%20Column%20Number%20for%20Desktop)
    
  * [Change Store Product Grid Column Number](v7.1/Change%20Store%20Product%20Grid%20Column%20Number)
    
  * [Change Variant Unavailable Alert for Product Blocks](v7.1/Change%20Variant%20Unavailable%20Alert%20for%20Product%20Blocks)
    
  * [Header Social Icon Discord Generic Icon to Discord Change](v7.1/Header%20Social%20Icon%20Discord%20Generic%20Icon%20to%20Discord%20Change)
    
  * [Header Social Icon URLs Change Based on Language](v7.1/Header%20Social%20Icon%20URLs%20Change%20Based%20on%20Language)
    
  * [Hide Blog Post Tags](v7.1/Hide%20Blog%20Post%20Tags)
    
  * [Hide Page Header and Footer](v7.1/Hide%20Page%20Header%20and%20Footer)
    
  * [Hide Product Detail Price, Quantity, Add to Cart](v7.1/Hide%20Product%20Detail%20Price,%20Quantity,%20Add%20to%20Cart)
    
  * [Hide Store Product Detail Recommended Product Last](v7.1/Hide%20Store%20Product%20Detail%20Recommended%20Product%20Last)
    
  * [Make Navigation Folders Clickable](v7.1/Make%20Navigation%20Folders%20Clickable)
    
  * [Mobile Menu Left Flyout](v7.1/Mobile%20Menu%20Left%20Flyout)
    
  * [Move Add To Cart Button to Right of Quantity](v7.1/Move%20Add%20To%20Cart%20Button%20to%20Right%20of%20Quantity)
    
  * [Move Blog Listing Item Title Above Meta](v7.1/Move%20Blog%20Listing%20Item%20Title%20Above%20Meta)
    
  * [Move Blog Post First Image to Top Area](v7.1/Move%20Blog%20Post%20First%20Image%20to%20Top%20Area)
    
  * [Move Header CTA Element to Left Side](v7.1/Move%20Header%20CTA%20Element%20to%20Left%20Side)
    
  * [Move Image Block Card Button Under Image](v7.1/Move%20Image%20Block%20Card%20Button%20Under%20Image)
    
  * [Move Page Last Footer Section to First](v7.1/Move%20Page%20Last%20Footer%20Section%20to%20First)
    
  * [Page Section Background Waves Overlay](v7.1/Page%20Section%20Background%20Waves%20Overlay)
    
  * [Page Section Gallery Hover on Everything But](v7.1/Page%20Section%20Gallery%20Hover%20on%20Everything%20But)
    
  * [Page Section Video Scrubbing Animation](v7.1/Page%20Section%20Video%20Scrubbing%20Animation)
    
  * [Page Sections Slide Toggle](v7.1/Page%20Sections%20Slide%20Toggle)
    
  * [Prepend Breadcrumb to Store Page Breadcrumbs](v7.1/Prepend%20Breadcrumb%20to%20Store%20Page%20Breadcrumbs)
    
  * [Remove Product Detail Quantity Field Outer Outline When Focused](v7.1/Remove%20Product%20Detail%20Quantity%20Field%20Outer%20Outline%20When%20Focused)
    
  * [Replace Blog "Header" Text with Category and or Tag](v7.1/Replace%20Blog%20"Header"%20Text%20with%20Category%20and%20or%20Tag)
    
  * [Replace Product Detail Add to Cart Button With Button that Redirects to a Url](v7.1/Replace%20Product%20Detail%20Add%20to%20Cart%20Button%20With%20Button%20that%20Redirects%20to%20a%20Url)
    
  * [Replace Variant Menu "select" Text](v7.1/Replace%20Variant%20Menu%20"select"%20Text)
    
  * [Reposition First Page Section Background so Header Does Not Hide It](v7.1/Reposition%20First%20Page%20Section%20Background%20so%20Header%20Does%20Not%20Hide%20It)
    
  * [Scroll to Top of Store Category Product Grid](v7.1/Scroll%20to%20Top%20of%20Store%20Category%20Product%20Grid)
    
  * [Set Store Product Details to Display Flex](v7.1/Set%20Store%20Product%20Details%20to%20Display%20Flex)
    
  * [Site Wide Rounded Image Corners](v7.1/Site%20Wide%20Rounded%20Image%20Corners)
    
  * [Store Category Section Reveal](v7.1/Store%20Category%20Section%20Reveal)
    
  * [Store Product Detail Price Add Sqs-Money-Native for Variants](v7.1/Store%20Product%20Detail%20Price%20Add%20Sqs-Money-Native%20for%20Variants)
    
  * [Store Product Detail Price Force Mutation on Quantity Change](v7.1/Store%20Product%20Detail%20Price%20Force%20Mutation%20on%20Quantity%20Change)
    
  * [Store Product Detail Price Total](v7.1/Store%20Product%20Detail%20Price%20Total)
    
  * [Store Product Grid Images Hide](v7.1/Store%20Product%20Grid%20Images%20Hide)
    
  * [Use Nth Product Gallery Image as Background for Page](v7.1/Use%20Nth%20Product%20Gallery%20Image%20as%20Background%20for%20Page)
    
---

**The rest of this document covers twcsl.js**.

# twcsl.js

twcsl.js is a Javascript library of common properties and methods useful for
building effects in Squarespace sites.

### Version 0.1d15

## Quick Install

Add the following to Settings > Advanced > Code Injection > HEADER.

```html
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://d1j8mu9lowy9zf.cloudfront.net/twcsl/0.1d15/twcsl.js"></script>
```

## Example

You want to build an effect that does something when you are on a store category
product grid page. You can use twcsl to test if you are on such a page with the
following.

```javascript
if ( twcsl.storePage.hasCategory ) console.log ( 'has category' );
```

## Methods

* getFirstPageSection

  * getFirstPageSection ( )
  
    * Returns jQuery object.
    
* getFormFieldLabel

  * getFormFieldLabel ( field )
  
    * Field is a jQuery object.
    * Returns form field label as entered in SS form editor interface.
    
* getFormNth

  * getFormNth ( [nth form on page] )
  
    * Default is the first form on the page.
    * Returns jQuery object or undefined for no form.
    
* getUrlParser

  * getUrlParser ( url )
  
    * Returns an anchor element.
    
* scrollEffect

  * scrollEffect ( callback [, easingFunction, invertScale ] )
  
    * Calculates the scroll postion as a ratio that is passed to your callback.
    
      easingFunction ( string ), default is linear
      
      invertScale ( boolean ), default is false
      
## Properties

* blogPage ( object )

  * categories ( array, for detail page only )
  
  * category ( string )
  
  * categoryUrlSlug ( string )
  
  * categoryUrlSlugs ( array, for detail page only )
  
  * hasCategory ( boolean )
  
  * hasTag ( boolean )
  
  * isBlogPage ( boolean )
  
  * isList ( boolean )
  
  * isPost ( boolean )
  
  * tag ( string )
  
  * tags ( array, for detail page only )
  
  * tagUrlSlug ( string )
  
  * tagUrlSlugs ( array, for detail page only )
  
  * urlSlug ( string )
  
* eventsPage ( object )

  * categories ( array, for detail page only )
  
  * category ( string )
  
  * categoryUrlSlug ( string )
  
  * categoryUrlSlugs ( array, for detail page only )
  
  * hasCategory ( boolean )
  
  * hasTag ( boolean )
  
  * isEvent ( boolean )
  
  * isEventPage ( boolean )
  
  * tag ( string )
  
  * tags ( array, for detail page only )
  
  * tagUrlSlug ( string )
  
  * tagUrlSlugs ( array, for detail page only )
  
  * urlSlug ( string )
  
* is70 ( boolean )

* is71 ( boolean )

* isCart ( boolean )

* isSearch ( boolean )

* navigator ( object )

  * hasTouchScreen ( boolean )
  
* ssVersion ( string )

* storePage ( object )

  * category ( string )
  
  * categoryUrlSlug ( string )
  
  * classTags ( array, for detail page only )
  
  * hasCategory ( boolean )
  
  * hasTag ( boolean )
  
  * isDetail ( boolean )
  
  * isStorePage ( boolean )
  
  * tag ( string )
  
  * tagUrlSlug ( string )
  
  * urlSlug ( string )
  
* version ( string, twcsl version )

## Changes

* **2021-09-03**

  * fixed bad blogPage isList check
  * fixes for blogPage for various v7.0 templates
  * bumped version to 0.1d15
  
* **2021-08-31**

  * added blogPage.isList
  * added effects outline
  * changed eventPage.isDetail to eventsPage.isEvent
  * changed eventPage to eventsPage
  * checked Five and Montauk family template support
  * bumped version to 0.1d14
  
* **2021-08-06**

  * changed blogPage.isDetail to isPost
  * bumped version to 0.1d13
  
* **2021-07-28**

  * fix for getFormFieldLabel not being exposed
  * bumped version to 0.1d12
  
* **2021-07-25**

  * fix for firstPageSection, changed to method getFirstPageSection
  * bumped version to 0.1d11
  
* **2021-07-25**

  * fix for getUrlParser not defined
  * bumped version to 0.1d10
  
* **2021-07-24**

  * added getUrlParser method
  * added getFormFieldLabel method
  * checked Avenue template support
  * consolidated nearly identical code into _getClassEventlistFilterText
    function
  * bumped version to 0.1d9
  
* **2021-06-27**

  * added firstPageSection
  * added storePage.classCategories
  * added blogPage
  * bumped version to 0.1d8
  
* **2021-06-07**

  * fix for _urlSlug undefined error on non-collection pages
  * added isCart and isSearch properties
  * bumped version to 0.1d7
  
* **2021-06-04**

  * reworked what was being labeled as category and tag, in many cases what was
    being return was not what the user enters in SS but classes or url search
    parameters as generated by SS
  * fix for is70 check
  * bumped version to 0.1d6
  
* **2021-06-02**

  * fix storePage.category being erroneously populated
  * bumped version to 0.1d5
  
* **2021-06-01**

  * added eventPage property
  * bumped version to 0.1d4
  
* **2021-05-31**

  * fix for library not initializing
  * bumped version to 0.1d3
  
* **2021-05-29**

  * added tags property for storePage
  * bumped version to 0.1d2
  
* **2021-05-26**

  * added version property for twcsl
  * filled out the documentation a bit
  * added getFormNth method
  * changed order of parameters for scrollEffect method
  * bumped version to 0.1d1
  
* **2021-05-22**

  * initial version
