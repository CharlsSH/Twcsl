<script>

  $( ( ) => {
  
    /*
    
      change form block post-submit redirect based on a select form field
      selected option
      
      Version       : 0.1d2
      
      SS Versions   : 7.0, 7.1
      
      Dependancies  : jQuery
                      
                      twcsl
                      
      By            : Thomas Creedon < http://www.tomsWeb.consulting/ >
      
      */
      
    const selectFormFieldLabel = '[enter select form field label here between single quotes]';
    
    const optionUrlMappings = {
    
      /*
      
        the format of each line is a select field option as entered in the SS
        form block interface and the post-submit redirect URL for the option
        
        an empty url means no post-submit redirect
        
        if a radio field option has single quotes in it then put a backslash
        before the single quotes. example: it's becomes it\'s
        
        following is an example line. copy the example line below and paste
        after the example line. remove '// ' at beginning of pasted line. repeat
        for as many a select field options as you want to change the redirect
        url.
        
        */
        
      // '[enter select field option here between single quotes]' : '[enter url here between single quotes]',
      
      }
      
    const formNth = 1; // which form block from the page to use
    
    // do not change anything below, there be the borg here
    
    const $form = twcsl.getFormNth ( formNth );
    
    if ( $form === undefined ) return; // bail if no form
    
    const $select = $( '.title:contains(' + selectFormFieldLabel + ')', $form )
    
      .filter ( function ( ) {
      
        const s = $( this ) [ 0 ].childNodes [ 0 ].nodeValue.trim ( );
        
        return s === selectFormFieldLabel;
        
        } );
        
    if ( $select.length != 1 ) return;
    
    $select = $select.next ( 'select' );
    
    const firstOption = $( 'option:eq( 0 )', $select )
    
      .attr ( 'value' );
      
    $form.attr ( 'data-success-redirect', optionUrlMappings [ firstOption ] );
    
    $select
    
      .change ( function ( ) {
      
        $form.attr ( 'data-success-redirect', optionUrlMappings [
        
          $( this ).val ( ) ] );
          
        } );
        
    } );
    
  </script>
