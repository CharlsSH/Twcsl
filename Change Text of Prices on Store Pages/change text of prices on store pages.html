<!--

  begin change text of prices on store pages
  
  Version         : 0.2d1
  
  SS Versions     : 7.0, 7.1
  
  v7.0 Templates  : Brine ( Aria, Blend, Burke, Cacao, Clay, Fairfield, Feed,
                    Foster, Greenwich, Hatch, Heights, Hunter, Hyde, Impact,
                    Jaunt, Juke, Keene, Kin, Lincoln, Maple, Margot, Marta,
                    Mentor, Mercer, Miller, Mojave, Moksha, Motto, Nueva, Pedro,
                    Pursuit, Rally, Rover, Royce, Sofia, Sonora, Stella, Thorne,
                    Vow, Wav, West )
                    
                    Five
                    
                    Montauk ( Julia, Kent, Om )
                    
                    your template is not listed? then it is not currently
                    supported
                    
  Dependancies    : jQuery
  
  Notes           : the code is comprised of several tags all of which must be
                    present for the effect to work
                    
  By              : Thomas Creedon < http://www.tomsWeb.consulting/ >
  
  -->
  
  <script>
  
    const searchReplaceText = {
    
      /*
      
        the format of each line is a search text and a replacement text
        
        if the text has single quotes in them then put a backslash before
        the single quotes. example: it's becomes it\'s
        
        the search text can be a string or a regular expression, backslashes
        need to be escaped in regular expressions.
        
        the replacement text can use regular expression grouping syntax when
        the search text is a regular expression
        
        following is an example line. copy the example line below and paste
        after the example line. remove '// ' at beginning of pasted line. repeat
        for as many times as needed
        
        */
        
      // '[enter search text here between single quotes]' : '[enter replacement text here between single quotes]',
      
      };
      
    </script>
    
  <!-- do not change anything below, there be the borg here -->
  
  <style>
  
    .product-price {
    
      visibility : hidden;
      
      }
      
    </style>
    
  <script>
  
    $( ( ) => {
    
      const keys = Object.keys ( searchReplaceText );
      
      const changeText = node => {
      
        const walker = document.createTreeWalker ( node, NodeFilter.SHOW_TEXT );
        
        while ( walker.nextNode ( ) ) {
        
          let s = walker.currentNode.data;
          
          $.each ( keys, function ( i, key ) {
          
            const m = key.match ( /\/(.+)\/(.*)/ );
            
            let t = key;
            
            if ( m !== null ) t = new RegExp ( m [ 1 ], m [ 2 ] );
            
            s = s.replace ( t, searchReplaceText [ key ] );
            
            } );
            
          walker.currentNode.data = s;
          
          }
        }
        
      const $productPrices = $( '.product-price' ).each ( function ( ) {
      
        changeText ( this );
        
        $( this ).css ( 'visibility', 'visible' );
        
        } );
        
      // bail if not product detail
      
      if ( ! $( '.ProductItem, #productWrapper' ).length ) return;
      
      // bail if no mutation observer available
      
      if ( ! ( 'MutationObserver' in window ) ) return;
      
      const observer = new MutationObserver ( mutations => {
      
        changeText ( mutations [ 0 ].target );
        
        } );
        
      // start listening for changes in product price
      
      observer.observe ( $productPrices.first ( ) [ 0 ], {
      
        childList : true
        
        } );
        
      } );
      
    </script>
    
  <!-- end change text of prices on store pages -->
