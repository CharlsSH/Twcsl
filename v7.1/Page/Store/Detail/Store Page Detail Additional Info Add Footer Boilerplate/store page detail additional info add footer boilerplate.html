<script>

  $( ( ) => {
  
    /*
    
      store page detail additional info add footer boilerplate
      
      License       : < https://tinyurl.com/s872fb68 >
      
      Version       : 0.2.1
      
      SS Version    : 7.1
      
      Fluid
      Engine
      Compatible    : No
      
      Dependencies  : twcsl
      
      Note          : this effect is not active in SS Preview to test it use
                      private browsing < https://tinyurl.com/ynessvsf >
      
      By            : Thomas Creedon < http://www.tomsWeb.consulting/ >
      
      no user serviceable parts below
      
      */
      
    const version = '0.2.1';
    
    const s = 'Tom\'s Web Consulting < http://www.tomsWeb.consulting >, ' +
    
      'Store Product Detail Additional Info Add Footer Boilerplate ' +
      
      `v${ version }, License < https://tinyurl.com/s872fb68 >`;
      
    console.log ( s );
    
    if ( window.frameElement !== null ) return; // bail if in preview
    
    if ( ! twcsl.page.store.detail.is ) return; // bail if not detail
    
    let selector = '#footer-sections x-twc-spdaiafb';
    
    let $element = $( selector );
    
    if ( ! $element.length ) return; // bail if no custom tag
    
    let position = $element.attr ( 'data-position' );
    
    $element = $( selector )
    
      .parents ( '.sqs-block-code' );
      
    const $row = $element
    
      .parents ( '.sqs-row' );
      
    const l = $( '.sqs-block', $row ).length;
    
    const $boilerplate = $element
    
      .parents ( '.sqs-grid-12' )
      
      .children ( );
      
    selector = '.ProductItem .ProductItem-additional .sqs-grid-12';
    
    const $additionalInfo = $( selector );
    
    $element.remove ( );
    
    if ( position === undefined )
    
      position = 'bottom';
      
    switch ( position ) {
    
      case 'bottom' :
      
        $additionalInfo.append ( $boilerplate );
        
        break;
        
      case 'top' :
      
        $additionalInfo.prepend ( $boilerplate );
        
        break;
        
      }
      
    if ( ! l ) $row.remove ( );
    
    } );
    
  </script>
