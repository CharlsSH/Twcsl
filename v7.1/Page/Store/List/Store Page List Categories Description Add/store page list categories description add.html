<!--

  begin store page list categories description add
  
  License       : < https://bit.ly/3F8sn8W >
  
  Version       : 0.6.0
  
  SS Version    : 7.1
  
  Fluid
  Engine
  Compatible    : Not Applicable
  
  Dependencies  : twcsl
  
  Notes         : the code is comprised of two script tags. both are needed for
                  the full effect to work
                  
                  the code contains default settings to place the description on
                  the top of the page. If you want to place the description in
                  another location you will need to create your own settings to
                  do so
  
  By            : Thomas Creedon < http://www.tomsWeb.consulting/ >
  
  -->
  
  <script>
  
    // initialize twc global if needed
    
    if ( window.twc == undefined ) window.twc = { };
    
    twc.splcda = {
    
      categoriesDescriptionMap : {
      
        /*
        
          the format of each line is a category list and a description for
          the category list
          
          for category list use values from Store Settings > Categories >
          [category name] > Edit > NAME field for the store page. you need all
          the text from the field. if you want to add a description to the
          Store page ( i.e. grid/listing ) leave the category empty, i.e. ''.
          for a top level category you would enter something like
          'Top Category'. For a nested category you enter something like
          'Top Category > Sub Category'
          
          if the description has single quotes in it then put a backslash
          before the single quotes. example: it's becomes it\'s
          
          following is an example line. copy the example line below and paste
          after the example line. remove '// ' at beginning of the pasted line.
          repeat for as many categories as you want to add a description. this
          has been done once initially
          
          */
          
        // '[enter category list here between single quotes replacing square brackets]' : '[enter category description here between single quotes replacing square brackets]',
        
        '[enter category list here between single quotes replacing square brackets]' : '[enter category description here between single quotes replacing square brackets]',
        
        },
        
      css : `
      
        .tweak-products-category-title .products.collection-content-wrapper .nested-category-title.nested-category-title-padding {
        
          margin-bottom : calc( 37px / 2 ); /* default divided */
          padding-bottom : 10px;
          
          }
          
        .tweak-products-category-title .products.collection-content-wrapper .nested-category-title.nested-category-title-padding::after {
        
          all : unset;
          
          }
          
        .tweak-products-category-title .products.collection-content-wrapper .twc-splcda-description {
        
          display : -webkit-box;
          display : -ms-flexbox;
          display : flex;
          
          -webkit-box-orient : horizontal;
          -webkit-box-direction : normal;
          -ms-flex-direction : row;
          flex-direction : row;
          
          margin-bottom : 37px;
          padding-bottom : 54px;
          position : relative;
          
          }
          
        .tweak-products-category-title .products.collection-content-wrapper .twc-splcda-description::after {
        
          border-bottom : 1px solid;
          bottom : 0;
          content : '';
          left : 0;
          opacity : 0.2;
          position : absolute;
          width : 100%;
          
          }
          
        @media screen and ( min-width : 576px ) {
        
          .tweak-products-header-text-alignment-middle .products.collection-content-wrapper .twc-splcda-description {
          
            -webkit-box-pack : center;
            -ms-flex-pack : center;
            justify-content : center;
            
            text-align : center;
            
            }
            
          }
  
        `,
        
      // selectorDestination, any valid selector value
      
      selectorDestination : '.nested-category-title',
      
      action : 'after', // values are after, append, before, prepend
      
      /*
      
        paragraphStyle, values are one of the following
        
        Heading 1
        Heading 2
        Heading 3
        Heading 4
        Paragraph 1
        Paragraph 2
        Paragraph 3
        Monospace
        
        */
        
      paragraphStyle : 'Heading 3'
      
      };
      
    </script>
    
  <!-- do not change anything below, there be the borg here -->
  
  <script>
  
    $( ( ) => {
    
      if ( twcsl.page.store.detail.is ) return; // bail on detail
      
      if ( twcsl.page.store.list.hasTag ) return; // bail on tag
      
      const categories = twcsl.page.store.list.categories;
      
      let options = twc.splcda;
      
      const map = options.categoriesDescriptionMap;
      
      if ( ! ( categories in map ) ) return; // bail if no category
      
      const action = options.action;
      
      const description = map [ categories ];
      
      const paragraphStyles = {
      
        'Heading 1'   : '<h1>',
        'Heading 2'   : '<h2>',
        'Heading 3'   : '<h3>',
        'Heading 4'   : '<h4>',
        'Paragraph 1' : '<p class="sqsrte-large">',
        'Paragraph 2' : '<p>',
        'Paragraph 3' : '<p class="sqsrte-small">',
        'Monospace'   : '<pre>' +
        
          '<code>' +
          
            '</code>' +
            
          '</pre>',
          
        };
        
      const paragraphStyle = paragraphStyles [
      
        options.paragraphStyle
        
        ];
        
      const css = options.css;
      
      const $element = $( `
      
        <style>
        
          ${ css }
          
          </style>
          
        <div class="twc-splcda-description">
        
        ` )
        
        .append ( paragraphStyle )
        
        .find ( ':last' )
        
          .html ( description )
          
          .end ( );
          
      const $elementDestination = $( options.selectorDestination );
      
      switch ( action ) {
      
        case 'after' :
        
          $elementDestination
          
            .after ( $element );
            
          break;
          
        case 'append' :
        
          $elementDestination
          
            .append ( $element );
            
          break;
          
        case 'before' :
        
          $elementDestination
          
            .before ( $element );
            
          break;
          
        case 'prepend' :
        
          $elementDestination
          
            .prepend ( $element );
            
          break;
          
        }
        
      } );
      
    </script>
    
  <!-- end store category page description add -->
