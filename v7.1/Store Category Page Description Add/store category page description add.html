<!--

  begin store category page description add
  
  License       : < https://bit.ly/3F8sn8W >
  
  Version       : 0.4.0
  
  SS Version    : 7.1
  
  Fluid
  Engine
  Compatible    : Not Applicable
  
  Dependencies  : twcsl
  
  Note          : the code is comprised of several tags. all are needed for the
                  full effect to work
  
  By            : Thomas Creedon < http://www.tomsWeb.consulting/ >
  
  -->
  
  <script>
  
    // initialize twc global if needed
    
    if ( window.twc == undefined ) window.twc = { };
    
    twc.scpda = {
    
      urlSlugDescriptionMap : {
      
        /*
        
          the format of each line is a category url slug and a description for
          the category
          
          for each category use the value from Store Settings > Categories >
          [category name] > Edit > URL SLUG field for the store page. you need
          all the text from the field. if you want to add a description to the
          Store page ( i.e. grid/listing ) leave the category empty, i.e. ''
          
          if the description has single quotes in it then put a backslash
          before the single quotes. example: it's becomes it\'s
          
          following is an example line. copy the example line below and paste
          after the example line. remove '// ' at beginning of pasted line.
          repeat for as many categories as you want to add a description. this
          has been done once initially
          
          */
          
        // '[enter category url slug here between single quotes replacing square brackets]' : '[enter category description here between single quotes replacing square brackets]',
        
        '[enter category url slug here between single quotes replacing square brackets]' : '[enter category description here between single quotes replacing square brackets]',
        
        }
        
      };
      
    /*
    
      use one of the following paragraph styles. if left empty ( i.e. '' ) then
      Heading 3 will be used
      
      Heading 1
      Heading 2
      Heading 3
      Heading 4
      Paragraph 1
      Paragraph 2
      Paragraph 3
      Monospace
      
      */
      
    let paragraphStyle = '';
    
    </script>
    
  <!-- do not change anything below, there be the borg here -->
  
  <style>
  
    .tweak-products-category-title .products.collection-content-wrapper .nested-category-title.nested-category-title-padding {
    
      margin-bottom : calc( 37px / 2 ); /* default divided */
      padding-bottom : 0;
      
      }
      
    .tweak-products-category-title .products.collection-content-wrapper .nested-category-title.nested-category-title-padding::after {
    
      all : unset;
      
      }
      
    .tweak-products-category-title .products.collection-content-wrapper .twc-scpda-nested-category-description {
    
      display : -webkit-box;
      display : -ms-flexbox;
      display : flex;
      
      -webkit-box-orient : horizontal;
      -webkit-box-direction : normal;
      -ms-flex-direction : row;
      flex-direction : row;
      
      margin-bottom : 37px;
      padding-bottom : 54px;
      position : relative;
      
      }
      
    .tweak-products-category-title .products.collection-content-wrapper .twc-scpda-nested-category-description::after {
    
      border-bottom : 1px solid;
      bottom : 0;
      content : '';
      left : 0;
      opacity : 0.2;
      position : absolute;
      width : 100%;
      
      }
      
    @media screen and ( min-width : 576px ) {
    
      .tweak-products-header-text-alignment-middle .products.collection-content-wrapper .twc-scpda-nested-category-description {
      
        -webkit-box-pack : center;
        -ms-flex-pack : center;
        justify-content : center;
        
        text-align : center;
        
        }
        
      }
      
    </style>
    
  <script>
  
    $( ( ) => {
    
      const paragraphStyles = {
      
        'Heading 1'   : '<h1>',
        'Heading 2'   : '<h2>',
        'Heading 3'   : '<h3>',
        'Heading 4'   : '<h4>',
        'Paragraph 1' : '<p class="sqsrte-large">',
        'Paragraph 2' : '<p>',
        'Paragraph 3' : '<p class="sqsrte-small">',
        'Monospace'   : '<pre>' +
        
          '<code>' +
          
            '</code>' +
            
          '</pre>',
          
        };
        
      if ( twcsl.page.store.detail.is ) return; // bail on detail
      
      if ( twcsl.page.store.list.hasTag ) return; // bail on tag
      
      const categoryUrlSlug = location
      
        .pathname
        
        .replace ( twcsl.page.store.urlSlug, '' )
        
      // bail if no category url slug mapped
      
      if ( ! ( categoryUrlSlug in twc.scpda.urlSlugDescriptionMap ) ) return;
      
      const description = twc.scpda.urlSlugDescriptionMap [ categoryUrlSlug ];
      
      if ( ! paragraphStyle ) paragraphStyle = 'Heading 3';
      
      $( '<div class="twc-scpda-nested-category-description">' )
      
        .append ( paragraphStyles [ paragraphStyle ] )
        
        .find ( ':last' )
        
          .html ( description )
          
          .end ( )
          
        .insertAfter ( '.nested-category-title' );
        
      } );
      
    </script>
    
  <!-- end store category page description add -->
