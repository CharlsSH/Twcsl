<script>

  const cbmdefdca = ( $element ) => {
  
    /*
    
      calendar block multi day event first day class add
      
      Version       : 0.1.1
      
      SS Version    : 7.1
      
      Fluid
      Engine
      Compatible    : Yes
      
      Dependancies  : jQuery
                      
                      calendar block event change
      
      By            : Thomas Creedon < http://www.tomsWeb.consulting/ >
      
      */
      
      let selector = '.flyoutitem--multiday';
      
      const $multiday = $( selector, $element );
      
      if ( ! $multiday.length ) return; // bail if not multi day
      
      selector = '.flyoutitem-datetime--12hr';
      
      const dayName = $( selector, $multiday )
      
        .text ( )
        
        .match ( /^\s*([^,]+)/ )
        
        [ 1 ];
        
      const dayNameLocal = $( $element )
      
        .parents ( '.yui3-calendar-day' )
        
        .find ( '.marker-dayname' )
        
        .text ( )
        
        .trim ( );
        
      const href = $( '.flyoutitem-link', $multiday )
      
        .attr ( 'href' );
        
      const end = dayName == dayNameLocal ? 1 : 2;
      
      $element
      
        .parents ( 'tbody' )
        
        .find ( `.item-link[href="${ href }"]` )
        
        .slice ( 0, end )
        
        .parents ( '.yui3-calendar-day' )
        
        .addClass ( 'twc-cbmdefdca-multiday-first' );
        
    };
    
  </script>
