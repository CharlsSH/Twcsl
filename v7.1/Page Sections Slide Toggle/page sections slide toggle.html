<!--

  begin page sections slide toggle
  
  Version       : 0.3.0
  
  SS Version    : 7.1
  
  Dependancies  : jQuery
  
  Notes         : the code is comprised of several tags. all are needed for the
                  full effect to work
                  
                  this effect is not active in SS Preview. to test it use
                  private browsing < https://bit.ly/3f6lhq2 >
  
  By            : Thomas Creedon < http://www.tomsWeb.consulting/ >
  
  -->
  
  <style>
  
    html:not( .squarespace-damask ) #page .twc-psst {
    
      /* the thickness of the toggle arrow line */
      
      --twc-psst-toggle-arrow-thickness : 3px;
      
      --twc-psst-toggle-arrow-size : 10px; /* the size of the toggle arrow */
      
      }
      
    </style>
    
  <script>
  
    // initialize twc global if needed
    
    if ( window.twc == undefined ) window.twc = { };
    
    twc.a63af292 = {
    
      // duration, a number (milliseconds) or the word slow or fast
      
      duration : '[enter duration between single quotes]',
      
      };
      
    </script>
    
  <!-- do not alter anything below, there be the borg here -->
  
  <style>
  
    html:not( .squarespace-damask ) #page .page-section,
    html:not( .squarespace-damask ) .twc-psst .sqs-row > .sqs-col-12 > *
    
      {
      
        display : none;
        
        }
        
    html:not( .squarespace-damask ) #page .twc-psst,
    html:not( .squarespace-damask ) #page .twc-psst--not.page-section
    
      {
      
        display : -webkit-box;
        display : -ms-flexbox;
        display : flex;
        
        }
        
    /* begin remove some vertical spacing */
    
      html:not( .squarespace-damask ) .twc-psst.section-height--small:not( .content-collection ):not( .gallery-section ):not( .user-items-list-section ) {
      
        min-height : 0; /* default 33vh */
        
        }
        
      html:not( .squarespace-damask ) .twc-psst.vertical-alignment--top:not( .content-collection ):not( .gallery-section ):not( .user-items-list-section ).section-height--small > .content-wrapper {
      
        padding-bottom : 0; /* default 3.3vmax */
        padding-top : 0; /* default 3.3vmax */
        
        }
        
      /* end remove some vertical spacing */
      
    /* begin restore some vertical spacing when page section is open */
    
      html:not( .squarespace-damask ) .twc-psst--open.section-height--small:not( .content-collection ):not( .gallery-section ):not( .user-items-list-section ) {
      
        min-height : 33vh;
        
        }
        
      html:not( .squarespace-damask ) .twc-psst--open.vertical-alignment--top:not( .content-collection ):not( .gallery-section ):not( .user-items-list-section ).section-height--small > .content-wrapper {
      
        padding-bottom : 3.3vmax;
        
        }
        
      /* end restore some vertical spacing when page section is open */
      
    html:not( .squarespace-damask ) .twc-psst .sqs-row > .sqs-col-12 > .sqs-block:nth-child( 2 ) {
    
      display : block;
      
      }
      
    html:not( .squarespace-damask ) .twc-psst .sqs-row > .sqs-col-12 > .sqs-block:nth-child( 2 ) .sqs-block-content {
    
      cursor : pointer;
      display : inline-block;
      
      }
      
    /* begin toggle arrows */
    
      html:not( .squarespace-damask ) .twc-psst .sqs-row > .sqs-col-12 > .sqs-block-html:nth-child( 2 ) .sqs-block-content > *:first-child::after {
      
        /* border-style : solid; */
        border : solid var( --twc-psst-toggle-arrow-color );
        border-width : 0;
        border-bottom-width : var( --twc-toggle-arrow-thickness );
        border-right-width : var( --twc-toggle-arrow-thickness );
        content : '';
        display : inline-block;
        height : var( --twc-psst-toggle-arrow-size );
        margin-left : 1em;
        
        -webkit-transform : rotate( 45deg );
        -ms-transform : rotate( 45deg );
        transform : rotate( 45deg );
        
        vertical-align : middle;
        width : var( --twc-psst-toggle-arrow-size );
        
        }
        
      html:not( .squarespace-damask ) .twc-psst--open .sqs-row > .sqs-col-12 > .sqs-block-html:nth-child( 2 ) .sqs-block-content > *:first-child::after {
      
        -webkit-transform : rotate( -135deg );
        -ms-transform : rotate( -135deg );
        transform : rotate( -135deg );
        
        }
        
      /* end toggle arrows */
      
    </style>
    
  <script>
  
    $( ( ) => {
    
      if ( window.frameElement !== null ) return; // bail if in preview
      
      let duration = twc.a63af292.duration;
      
      $( '#page .page-section' ).each ( function ( ) {
      
        const $this = $( this );
        
        const $element = $( 'x-twc-psst', $this );
        
        const isSectionToggle = Boolean ( $element.length );
        
        if ( ! isSectionToggle ) {
        
          $this.addClass ( 'twc-psst--not' );
          
          return true;
          
          }
          
        const $blockHtmlFirst =
        
          $( '.sqs-row > .sqs-col-12 > .sqs-block-html', $this )
          
          .eq ( 0 )
          
          .click ( function ( ) {
          
            if ( ! isNaN ( duration ) ) duration = Number ( duration );
            
            $( this )
            
              .nextUntil ( '.page-section', '.sqs-row, .sqs-block' )
              
              .slideToggle ( duration )
              
              .parents ( '.page-section' )
              
                .toggleClass ( 'twc-psst--open' );
                
            } );
            
        let color = $element.attr ( 'data-toggle-arrow-color' );
        
        color = color == undefined ? $blockHtmlFirst.css ( 'color' ) : color;
          
        $blockHtmlFirst.css ( '--twc-psst-toggle-arrow-color', color );
        
        $this.addClass ( 'twc-psst' );
        
        } );
        
      } );
      
    </script>
    
  <!-- end slide toggle page sections -->
