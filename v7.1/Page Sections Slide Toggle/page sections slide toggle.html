<!--

  begin page sections slide toggle
  
  License       : < https://bit.ly/3F8sn8W >
  
  Version       : 0.4.0
  
  SS Version    : 7.1
  
  Fluid
  Engine
  Compatible    : Yes
  
  Dependencies  : jQuery
  
  Notes         : the code is comprised of several tags. all are needed for the
                  full effect to work
                  
                  this effect is not active in SS Preview. to test it use
                  private browsing < https://bit.ly/3f6lhq2 >
  
  By            : Thomas Creedon < http://www.tomsWeb.consulting/ >
  
  -->
  
  <style>
  
    html:not( .squarespace-damask ) #page .twc-psst {
    
      /* the thickness of the toggle lines */
      
      --twc-psst-toggle-thickness : 3px;
      
      --twc-psst-toggle-size : 10px; /* the size of the toggle */
      
      }
      
    </style>
    
  <script>
  
    // initialize twc global if needed
    
    if ( window.twc == undefined ) window.twc = { };
    
    twc.a63af292 = {
    
      // duration, a number (milliseconds) or the word slow or fast
      
      duration : '10',
      
      // duration : '[enter duration between single quotes replacing square brackets]',
      
      };
      
    </script>
    
  <!-- do not change anything below, there be the borg here -->
  
  <style>
  
    html:not( .squarespace-damask ) #page {
    
      --twc-psst-section-display-webkit-box : none;
      --twc-psst-section-display-ms-flexbox : none;
      --twc-psst-section-display : none;
      
      }
      
    html:not( .squarespace-damask ) #page .page-section {
    
      display : var( --twc-psst-section-display-webkit-box );
      display : var( --twc-psst-section-display-ms-flexbox );
      display : var( --twc-psst-section-display );
      
      }
      
    /* remove some vertical spacing */
    
    html:not( .squarespace-damask ) .twc-psst.section-height--small:not( .content-collection ):not( .gallery-section ):not( .user-items-list-section ) {
    
      min-height : 0; /* default 33vh */
      
      }
      
    /* restore some vertical spacing when page section is open */
    
    html:not( .squarespace-damask ) .twc-psst--open.section-height--small:not( .content-collection ):not( .gallery-section ):not( .user-items-list-section ) {
    
      min-height : 33vh;
      
      }
      
    /* begin toggles */
    
      html:not( .squarespace-damask ) .twc-psst /* .sqs-block-content */ {
      
        cursor : pointer;
        
        }
        
      html:not( .squarespace-damask ) x-twc-psst {
      
        display : block;
        height : var( --twc-psst-toggle-size );
        width : var( --twc-psst-toggle-size );
        
        }
        
      /* begin arrow */
      
        html:not( .squarespace-damask ) x-twc-psst .arrow {
        
          border : solid 0 red;
          border-bottom-width : var( --twc-psst-toggle-thickness );
          border-right-width : var( --twc-psst-toggle-thickness );
          height : 100%;
          
          -webkit-transform : rotate( 45deg );
          -ms-transform : rotate( 45deg );
          transform : rotate( 45deg );
          
          transition : transform 0.2s;
          
          width : 100%;
          
          }
          
        html:not( .squarespace-damask ) .twc-psst--open x-twc-psst .arrow {
        
          -webkit-transform : rotate( -135deg );
          -ms-transform : rotate( -135deg );
          transform : rotate( -135deg );
          
          }
          
        /* end arrow */
        
      /* begin plus */
      
        html:not( .squarespace-damask ) x-twc-psst .plus {
        
          background-color : red;
          height : 3px;
          position : absolute;
          transition : transform 0.2s;
          width : 10px;
          
          }
          
        html:not( .squarespace-damask ) x-twc-psst .plus.vertical-line {
        
          transform : rotate( 90deg );
          transition : transform 0.2s;
          
          }
          
        html:not( .squarespace-damask ) .twc-psst--open x-twc-psst .plus.vertical-line {
        
          transform : unset;
          
          }
          
        /* end plus */
        
      /* end toggles */
      
    </style>
    
  <script>
  
    $( ( ) => {
    
      if ( window.frameElement !== null ) return; // bail if in preview
      
      const css = {
      
        '--twc-psst-section-display-webkit-box' : '-webkit-box',
        '--twc-psst-section-display-ms-flexbox' : '-ms-flexbox',
        '--twc-psst-section-display' : 'flex',
        
        };
        
      const iconHtml = {
      
        arrow : `<div class="arrow">
      
          </div>`,
          
        plus : `<div class="plus horizontal-line">
        
          </div>
          
        <div class="plus vertical-line">
        
          </div>`,
          
        };
        
      let duration = twc.a63af292.duration;
      
      $( '#page .page-section' ).each ( function ( ) {
      
        const $this = $( this );
        
        let $element = $( 'x-twc-psst', $this );
        
        const makeSectionToggle = Boolean ( $element.length );
        
        if ( ! makeSectionToggle ) return true; // continue if not make toggle
        
        const $sectionNext = $this.next ( '.page-section' );
        
        let color = $element.attr ( 'data-toggle-color' );
        
        let icon = $element.attr ( 'data-toggle-icon' );
        
        $this
        
          .addClass ( 'twc-psst' )
          
          .click ( function ( ) {
          
            if ( ! isNaN ( duration ) ) duration = Number ( duration );
            
            $sectionNext.slideToggle ( duration );
            
            $this.toggleClass ( 'twc-psst--open' );
            
            } );
            
        color = color == undefined ? $this.css ( 'color' ) : color;
          
        icon = icon == undefined ? 'arrow' : icon;
          
        const html = iconHtml [ icon ];
        
        $this.css ( '--twc-psst-toggle-color', color );
        
        $element.append ( html );
        
        $sectionNext
        
          .css ( 'display', 'none' )
          
        } );
        
      $( '#page' ).css ( css );
      
      } );
      
    </script>
    
  <!-- end page sections slide toggle -->
